# :zap: Giant Swarm Release v14.1.0 for Azure :zap:

This is the first workload cluster release to support [spot VMs](https://azure.microsoft.com/en-us/pricing/spot/) on Azure. Please refer to [Giant Swarm Azure Spot docs](https://docs.giantswarm.io/advanced/spot-instances/azure/) for more information.

With this release the `volumeBindingMode` for the following `storageClasses` will be changed to `WaitForFirstConsumer`:

- default
- managed-premium
- managed-standard

We made this change to allow kubernetes making better decisions about which availability zone to create new
`AzureDisks` into, according to scheduling of pods.

This will not affect any `PersistentVolume` already existing, but will affect future provisioning. In case of old behavior being preferable, creation of additional storageclass will be required.
Refer to the [official documentation](https://kubernetes.io/docs/concepts/storage/storage-classes/#volume-binding-mode)
for more details and get in touch your solution engineer for any doubts.

## Change details

### azure-operator [5.4.0](https://github.com/giantswarm/azure-operator/releases/tag/v5.4.0)

#### Changed

- Changed StorageClasses volumeBindingMode to WaitForFirstConsumer.
- Simplified the upgrade process by leveraging automated draining of nodes.

#### Added

- Added spot instances support for node pools.

### containerlinux [2605.12.0](https://www.flatcar-linux.org/releases/#release-2605.12.0)

**Security fixes**

*   linux - [CVE-2020-28374](https://nvd.nist.gov/vuln/detail/CVE-2020-28374), [CVE-2020-36158](https://nvd.nist.gov/vuln/detail/CVE-2020-36158)
*   go - [CVE-2021-3114](https://github.com/golang/go/issues/43786)
*   sudo - [CVE-2021-3156](https://nvd.nist.gov/vuln/detail/CVE-2021-3156), [CVE-2021-23239](https://nvd.nist.gov/vuln/detail/CVE-2021-23239)

**Bug fixes**

*   `/etc/iscsi/initiatorname.iscsi` is generated by the iscsi-init service ([#321](https://github.com/kinvolk/Flatcar/issues/321))
*   Prevent iscsiadm buffer overflow ([#318](https://github.com/kinvolk/Flatcar/issues/318))

**Changes**

*   Revert to building docker and containerd with go1.13 instead of go1.15. This reduces the SIGURG log spam ([Issue #315](https://github.com/kinvolk/Flatcar/issues/315) [PR #774](https://github.com/kinvolk/coreos-overlay/pull/774))
*   The containerd socket is now available in the default location (`/run/containerd/containerd.sock`) and also as a symlink in the previous location (`/run/docker/libcontainerd/docker-containerd.sock`) ([#771](https://github.com/kinvolk/coreos-overlay/pull/771))
*   With the iscsi update, the service unit has changed from iscsid to iscsi ([#791](https://github.com/kinvolk/coreos-overlay/pull/791))
*   AWS Pro: include scripts to facilitate setup of EKS workers ([#794](https://github.com/kinvolk/coreos-overlay/pull/794)).
*   Missed from earlier notes: with the previous open-iscsi update to 2.1.2, the service unit name changed from iscsid to iscsi ([#682](https://github.com/kinvolk/coreos-overlay/pull/682))

**Updates**

*   linux ([5.4.92](https://lwn.net/Articles/843687/))
*   open-iscsi ([2.1.3](https://github.com/open-iscsi/open-iscsi/releases/tag/2.1.3))
*   go ([1.15.7](https://go.googlesource.com/go/+/refs/tags/go1.15.7))
*   sudo ([1.9.5p2](https://github.com/sudo-project/sudo/releases/tag/SUDO_1_9_5p2))


### chart-operator [2.9.0](https://github.com/giantswarm/chart-operator/releases/tag/v2.9.0)

#### Added
- Use diff key when logging differences between the current and desired release.
#### Fixed
- Stop updating Helm release if it has failed the previous 5 attempts.
